#!/bin/bash

select=$1
object=$2
plot=$3
stat=$4
diurnal=$5

#path=/Users/florentbrient/Dropbox/MESO-NH/Github/objects-LES/
# sxtropics
path=`pwd`

svt=(SVT001 SVT002 SVT003)

case='IHOP';sens='Ru0x0';hour=('004','006','008')
#case='BOMEX';sens='Ru0x0';hour=('004','006','008')
#case='FIRE';sens='Ls2x0';hour=('006','012','015','018','021','024');svt=(SVT004 SVT005 SVT006)

#case='IHOP' #'AYOTTE' #'RICO' #'IHOP' #'BOMEX' 'FIRE' 'ARMCU'
#sens='Ru0x0' #'24Sx0' #'Ru0x0' #'L2RA2' 'Ls2x0' 'LNOCF' 'Ru0NC' 'Ru0x0'
#hour=('006','012','018','024')
#hour=('003','006','009','012','015','018','021','024')
#hour=('002','004','006','008','010','012')
#hour=('008','012')

if [ $select = 1 ] ; then
echo 'Running selection variables...'
cd $path/rename_netcdf
./script_rename_dim $case $sens $svt
fi

if [ $object = 1 ] ; then
echo 'Running selection objects...'
pathobj=../objects/script/
pathobj=../../Dropbox/GitHub/objects/script
cd $pathobj
hours=${hour//,/' '}
for hh in $hours
do
  file=${path}/data/${case}/${sens}/sel_${sens}.1.V0301.${hh}.nc4
  python identify_downdrafts_and_updrafts.py updraft   ${svt[0]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[0]}+WT $file
  python identify_downdrafts_and_updrafts.py updraft   ${svt[1]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[1]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[2]}+WT $file
done
cd $path
fi

if [ $plot = 1 ] ; then
echo 'Running plot...'
cd $path
./run_plot_LES_3D.sh $case $sens $hour
fi

if [ $stat = 1 ] ; then
echo 'Running stats...'
./run_stats.sh $case $sens $hour ${svt[@]}
fi

if [ $diurnal = 1 ] ; then
echo 'Running diurnal...'
./run_diurnal.sh $case $sens $hour ${svt[@]}
fi
