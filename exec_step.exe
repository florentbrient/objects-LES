#!/bin/bash

select=$1
object=$2
plot=$3
stat=$4

#path=/Users/florentbrient/Dropbox/MESO-NH/Github/objects-LES/
# sxtropics
path=`pwd`

case='FIRE' #'IHOP' #'AYOTTE' #'RICO' #'IHOP' #'BOMEX' 'FIRE' 'ARMCU'
sens='Ls2x0' #'Ru0x0' #'24Sx0' #'Ru0x0' #'L2RA2' 'Ls2x0' 'LNOCF' 'Ru0NC' 'Ru0x0'
hour=('021')

#svt=(SVT001 SVT002 SVT003)
svt=(SVT004 SVT005 SVT006)

if [ $select = 1 ] ; then
echo 'Running selection variables...'
cd $path/rename_netcdf
./script_rename_dim $case $sens $svt
fi

if [ $object = 1 ] ; then
echo 'Running selection objects...'
pathobj=../objects/script/
pathobj=../../Dropbox/GitHub/objects/script
cd $pathobj
for hh in $hour
do
  file=${path}/data/${case}/${sens}/sel_${sens}.1.V0301.${hh}.nc4
  python identify_downdrafts_and_updrafts.py updraft   ${svt[0]} $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[0]} $file
  python identify_downdrafts_and_updrafts.py updraft   ${svt[1]} $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[1]} $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[2]} $file
  python identify_downdrafts_and_updrafts.py updraft   ${svt[0]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[0]}+WT $file
  python identify_downdrafts_and_updrafts.py updraft   ${svt[1]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[1]}+WT $file
  python identify_downdrafts_and_updrafts.py downdraft ${svt[2]}+WT $file
done
fi

if [ $plot = 1 ] ; then
echo 'Running plot...'
cd $path
./run_plot_LES_3D.sh $case $sens $hour
fi

if [ $stat = 1 ] ; then
echo 'Running stats...'
./run_stats.sh $case $sens $hour ${svt[@]}
fi
